import React, { useState } from 'react';
import { createRoot } from 'react-dom/client';

const topics = [
  {
    id: 'intro_duties',
    title: 'معرفی و وظایف امور اراضی',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>,
    content: (
      <>
        <h2>معرفی مدیریت امور اراضی استان کردستان</h2>
        <p>در فروردین ماه سال ۱۳۵۹ قانون نحوه احیاء و واگذاری اراضی کشاورزی در حکومت جمهوری اسلامی ایران تدوین و به تصویب شورای انقلاب رسید. جهت اجرایی نمودن قانون فوق ستاد مرکزی هیئت های هفت نفره واگذاری زمین با هدف واگذاری اراضی موات و منابع ملی به روستائیان و کشاورزان در سراسر کشور و بالطبع در استان کردستان به عنوان یک نهاد انقلابی تأسیس شدند. ستاد مرکزی هیئت های هفت نفره خدمات بسیار ارزشمندی به روستاییان و کشاورزان ارائه نمود و در بهمن ماه سال ۱۳۷۱ با تشکیلات اصلاحات ارضی ادغام شد و مدیریت امور اراضی استان نیز ضمن حفظ ارتباط تخصصی با سازمان امور اراضی کشور، از نظر ساختار تشکیلاتی زیر نظر سازمان جهاد کشاورزی استان و به عنوان بازوی اجرایی اعمال حاکمیت و حافظ منابع دولت و مردم در اراضی ملی و دولتی و مستثنیات به فعالیت خود ادامه داده است.</p>
        <h3>وظایف مدیریت امور اراضی استان</h3>
        <p>مدیریت امور اراضی در رابطه با حفاظت و صیانت از اراضی کشاورزی وظایف متعدد و متنوعی بر عهده دارد که در این رابطه می توان به موارد زیر اشاره نمود:</p>
        <ul>
            <li>حفاظت و صیانت از اراضی کشاورزی و جلوگیری از تخریب، تبدیل، تفکیک و تغییر کاربری عرصه های زراعی و باغی.</li>
            <li>ساماندهی و تثبیت مالکیت اراضی کشاورزی در جهت رعایت حقوق متقابل دولت و مردم در امور مربوط به اراضی کشور.</li>
            <li>نظارت بر واگذاری اراضی.</li>
            <li>حفظ حقوق دولت در اراضی مشمول قوانین و مقررات مربوط به وظایف وزارت متبوع.</li>
            <li>واگذاری عرصه های مناسب برای توسعه فعالیتهای کشاورزی و غیر کشاورزی.</li>
            <li>انجام اصلاح قانون حفظ کاربری اراضی زراعی و باغات جهت حفظ و صیانت از عرصه های تولیدی.</li>
        </ul>
      </>
    ),
    searchableText: 'معرفی و وظایف امور اراضی معرفی مدیریت امور اراضی استان کردستان قانون نحوه احیاء و واگذاری اراضی کشاورزی ستاد مرکزی هیئت های هفت نفره واگذاری زمین حفاظت و صیانت از اراضی کشاورزی ساماندهی و تثبیت مالکیت نظارت بر واگذاری اراضی'
  },
  {
    id: 'land_use_change',
    title: 'تغییر کاربری و مصادیق آن',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" /></svg>,
    content: (
      <>
        <h2>تغییر کاربری چیست؟</h2>
        <p>هرگونه اقدام که مانع از بهره برداری و استمرار کشاورزی در اراضی زراعی و باغ ها در قالب ایجاد بنا، برداشتن یا افزایش شن و ماسه و سایر اقدامات که بنا بر تشخیص وزارت جهاد کشاورزی، سازمان جهاد کشاورزی استان ها و مدیریت جهاد کشاورزی شهرستان ها باشد تغییر کاربری محسوب می شود.</p>
        <h3>مصادیق تغییر کاربری غیر مجاز</h3>
        <ul>
            <li>برداشت یا افزایش شن و ماسه</li>
            <li>خاک برداری و خاک ریزی، سنگ فرش</li>
            <li>گودبرداری، دیوارکشی، پی کنی</li>
            <li>احداث هر گونه بنای مسکونی و غیره</li>
            <li>دپوی زباله، نخاله و مصالح ساختمانی</li>
            <li>ایجاد سکونت گاه های موقت و استقرار کانکس</li>
            <li>احداث طرح های خدمات عمومی (راه، خط لوله و...)</li>
            <li>رها کردن پساب های صنعتی و فاضلاب</li>
        </ul>
      </>
    ),
    searchableText: 'تغییر کاربری و مصادیق آن تغییر کاربری چیست؟ مصادیق تغییر کاربری غیر مجاز برداشت یا افزایش شن و ماسه خاک برداری گودبرداری دیوارکشی احداث بنای مسکونی دپوی زباله ایجاد سکونت گاه های موقت استقرار کانکس طرح های خدمات عمومی پساب های صنعتی'
  },
  {
    id: 'request_guide',
    title: 'راهنمای درخواست تغییر کاربری',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>,
    content: (
      <>
        <h2>راهنمای درخواست تغییر کاربری</h2>
        <h3>نحوه پذیرش درخواست متقاضیان</h3>
        <p>افرادی که درخواست تغییر کاربری اراضی کشاورزی خود را دارند، میتوانند با در اختیار داشتن مدارک لازم به مدیریت جهاد کشاورزی شهرستان محل اجرای طرح و یا مدیریت امور اراضی مستقر در سازمان جهاد کشاورزی استان محل وقوع ملک مراجعه نمایند تا درخواست آنها در کمیسیون تبصره ۱ ماده ۱ بررسی شود.</p>
        <h3>مدارک مورد نیاز جهت طرح درخواست</h3>
         <ul>
            <li>ارائه سند مالکیت رسمی (مدارک ثابت کننده و قانونی مالکیت)</li>
            <li>جواز تأسیس و یا موافقت اصولی به نام متقاضی</li>
            <li>نقشه عرصه</li>
            <li>نظریه اداره کل حفاظت محیط زیست</li>
            <li>حسب مورد، پاسخ استعلام سایر دستگاه‌های ذیربط</li>
        </ul>
      </>
    ),
    searchableText: 'راهنمای درخواست تغییر کاربری نحوه پذیرش درخواست متقاضیان مدارک مورد نیاز جهت طرح درخواست سند مالکیت جواز تأسیس نقشه عرصه نظریه اداره کل حفاظت محیط زیست پاسخ استعلام'
  },
  {
    id: 'commission_info',
    title: 'کمیسیون و طرح‌های مرتبط',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18 18.72v-5.25A2.25 2.25 0 0120.25 11.25v-1.5c0-1.5-1.5-2.25-3.75-2.25S13.5 8.25 13.5 9.75v1.5c0 .414.336.75.75.75h1.5a2.25 2.25 0 012.25 2.25v5.25m-3.75-15H9.75M12 18.75M12 9.75M12 15.75M12 12.75m-7.5-3H3.75M7.5 12h-3.75m15-3h-3.75M16.5 12h3.75" /></svg>,
    content: (
      <>
        <h2>اعضای تشکیل دهنده کمیسیون تبصره یک ماده یک استان</h2>
        <p>کمیسیون تشخیص موارد ضروری تغییر کاربری اراضی زراعی و باغی در هر استان، مرکب از اعضای زیر است:</p>
        <ul>
            <li>رئیس سازمان جهاد کشاورزی (به عنوان رئیس کمیسیون)</li>
            <li>رئیس سازمان مسکن و شهرسازی</li>
            <li>مدیر امور اراضی</li>
            <li>مدیر کل حفاظت محیط زیست استان</li>
            <li>یک نفر نماینده استاندار</li>
        </ul>
        <h3>طرح هایی که نیاز به موافقت کمیسیون ندارند</h3>
        <p>احداث گلخانه، دامداری، مرغداری، پرورش ماهی و سایر تولیدات کشاورزی و کارگاه های صنایع تکمیلی و تبدیلی غذایی در روستاها که موجب بهینه کردن تولیدات بخش کشاورزی هستند، با رعایت ضوابط زیست محیطی و با موافقت رئیس سازمان جهاد کشاورزی استان، نیاز به طرح در کمیسیون ندارند.</p>
      </>
    ),
    searchableText: 'کمیسیون و طرح‌های مرتبط اعضای تشکیل دهنده کمیسیون تبصره یک ماده یک استان رئیس سازمان جهاد کشاورزی مسکن و شهرسازی مدیر امور اراضی مدیر کل حفاظت محیط زیست نماینده استاندار طرح هایی که نیاز به موافقت کمیسیون ندارند گلخانه دامداری مرغداری پرورش ماهی'
  },
  {
    id: 'exemptions_penalties',
    title: 'معافیت‌ها و مجازات‌ها',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 3v18m-8.25-6.75h16.5M3 10.5h18M3.75 17.25h16.5M3.75 6.75h16.5" /></svg>,
    content: (
        <>
            <h2>موارد معاف از عوارض قانون حفظ کاربری اراضی</h2>
            <p>موارد زیر در صورت موافقت کمیسیون، از پرداخت عوارض معاف می‌باشند:</p>
            <ul>
                <li>احداث واحدهای مسکونی برای سکونت شخصی صاحبان زمین تا ۵۰۰ متر مربع (فقط برای یک بار)</li>
                <li>واحدهای صنایع تبدیلی و تکمیلی بخش کشاورزی</li>
                <li>طرح های خدمات عمومی مورد نیاز مردم</li>
                <li>صنایع دستی و طرح های ملی - استانی</li>
            </ul>
            <h2>مجازات تغییر کاربری</h2>
            <p>در صورت تغییر کاربری غیرمجاز، متخلف علاوه بر قلع و قمع بنا، به پرداخت جزای نقدی از یک تا سه برابر بهای اراضی به قیمت روز محکوم خواهد شد. در صورت تکرار جرم، حداکثر جزای نقدی و حبس از یک تا شش ماه اعمال می‌شود.</p>
        </>
    ),
    searchableText: 'معافیت‌ها و مجازات‌ها موارد معاف از عوارض قانون حفظ کاربری اراضی واحدهای مسکونی صنایع تبدیلی طرح های خدمات عمومی صنایع دستی مجازات تغییر کاربری قلع و قمع بنا جزای نقدی'
  },
  {
    id: 'cadastre',
    title: 'کاداستر (حدنگاری)',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M9 6.75V15m6-6v8.25m.503-6.998l4.875-2.437a.38.38 0 01.497.311v11.312a.38.38 0 01-.497.311L15.503 15.002v-6.998zM3.75 15.375L8.625 13.5v-3L3.75 12v3.375z" /></svg>,
    content: (
        <>
            <h2>کاداستر چیست؟</h2>
            <p>حدنگار یا کاداستر شامل فهرست مرتب شده اطلاعات مربوط به قطعات زمین (اراضی) است که مشخصاتی مانند مساحت، ابعاد، نوع کاربری، و مشخصات حقوقی را در کنار یک نقشه بزرگ مقیاس نمایش می‌دهد. هدف اصلی این طرح، ایجاد آمار دقیقی از اراضی کشاورزی برای برنامه‌ریزی صحیح است.</p>
            <h3>هدف طرح کاداستر</h3>
            <p>مهم‌ترین اهداف طرح کاداستر عبارتند از: تثبیت مالکیت، صدور اسناد مالکیت، شناسنامه‌دار کردن اراضی کشاورزی و برنامه‌ریزی جهت مدیریت یکپارچه و بهینه اراضی.</p>
        </>
    ),
    searchableText: 'کاداستر (حدنگاری) کاداستر چیست؟ حدنگار قطعات زمین نقشه بزرگ مقیاس هدف طرح کاداستر تثبیت مالکیت صدور اسناد مالکیت شناسنامه‌دار کردن اراضی'
  },
  {
    id: 'public_system_131',
    title: 'سامانه ارتباط مردمی (۱۳۱)',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" /></svg>,
    content: (
        <>
            <h2>آشنایی با سامانه ارتباط مردمی حفاظت اراضی کشاورزی (سامانه ۱۳۱)</h2>
            <p>با توجه به اهمیت مشارکت مردمی برای جلوگیری از تخلفاتی مانند تغییر کاربری غیرمجاز و زمین‌خواری، سازمان امور اراضی کشور سامانه تلفنی ۱۳۱ را راه‌اندازی کرده است. این سامانه به صورت شبانه‌روزی آماده دریافت گزارش‌های مردمی در خصوص تخلفات مربوط به اراضی کشاورزی است.</p>
            <h3>مهمترین اهداف راه اندازی سامانه ۱۳۱</h3>
            <ul>
                <li>جلوگیری از تغییر کاربری اراضی زراعی و باغی.</li>
                <li>جلوگیری از تفکیک و خرد شدن زمین های کشاورزی.</li>
                <li>جلوگیری از تصرفات غیر مجاز و زمین خواری.</li>
                <li>جلوگیری از استفاده غیر مجاز از اراضی واگذار شده.</li>
                <li>پیگیری تخلفات، پیشنهادات و انتقادات در حوزه امور اراضی.</li>
            </ul>
        </>
    ),
    searchableText: 'سامانه ارتباط مردمی (۱۳۱) حفاظت اراضی کشاورزی مشارکت مردمی زمین‌خواری گزارش‌های مردمی اهداف راه اندازی سامانه ۱۳۱ جلوگیری از تغییر کاربری جلوگیری از تفکیک و خرد شدن زمین جلوگیری از تصرفات غیر مجاز'
  },
   {
    id: 'patrol_results',
    title: 'نتایج و تاثیرات گشت‌های ویژه',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" /></svg>,
    content: (
        <>
            <h2>نتایج و تاثیرات عملکرد گشت های ویژه حفظ کاربری</h2>
            <p>فعالیت گشت‌های ویژه در راستای حفظ اراضی کشاورزی، نتایج مثبت و قابل توجهی به همراه داشته است که در ادامه به مهم‌ترین آنها اشاره می‌شود:</p>
            <ul>
                <li>تحقق حفظ اراضی زراعی و باغی در راستای رسالت مدیریت امور اراضی.</li>
                <li>پیشگیری و جلوگیری از تغییر کاربری‌های غیرمجاز.</li>
                <li>حفظ و صیانت از منابع تولید و بهره‌وری مستمر در بخش کشاورزی.</li>
                <li>تثبیت اجرای قوانین و مقررات مربوط به قانون حفظ کاربری.</li>
                <li>برخورد مؤثر با ساخت و سازهای غیر مجاز با رویکردی در افزایش آگاهی عمومی افراد.</li>
                 <li>تشدید نظارت بر حفظ اراضی به صورت بازدیدهای مستمر.</li>
            </ul>
        </>
    ),
    searchableText: 'نتایج و تاثیرات گشت‌های ویژه عملکرد گشت های ویژه حفظ کاربری تحقق حفظ اراضی پیشگیری و جلوگیری از تغییر کاربری‌های غیرمجاز حفظ و صیانت از منابع تولید تثبیت اجرای قوانین برخورد مؤثر با ساخت و سازهای غیر مجاز تشدید نظارت'
  },
    {
    id: 'request_flowchart',
    title: 'فلوچارت رسیدگی به درخواست',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 1.5m1-1.5l1 1.5m0 0l.5 1.5m-2-3l2 3m4.5-3l.5 1.5m-2-3l2 3m-7.5 0h7.5" /></svg>,
    content: (
        <>
            <h2>مراحل رسیدگی به درخواست متقاضیان تغییر کاربری</h2>
            <p>فرآیند رسیدگی به درخواست‌های تغییر کاربری اراضی زراعی و باغی به صورت خلاصه شامل مراحل زیر است:</p>
            <ol>
                <li><strong>شروع:</strong> تکمیل فرم‌های مربوطه (فرم ۱-۸) توسط متقاضی و تسلیم مدارک به مدیریت جهاد کشاورزی شهرستان.</li>
                <li><strong>بررسی مدارک:</strong> مدارک توسط مدیریت جهاد کشاورزی شهرستان بررسی می‌شود. در صورت نقص، به متقاضی اعلام می‌گردد.</li>
                <li><strong>تشخیص نوعیت:</strong> کارشناسان نوعیت اراضی (زراعی و باغی یا غیر آن) را مشخص می‌کنند.</li>
                <li><strong>ارسال به دبیرخانه:</strong> در صورت تایید اولیه، پرونده به دبیرخانه کمیسیون تبصره ۱ ماده ۱ ارسال می‌شود.</li>
                <li><strong>بررسی کارشناسی:</strong> مدارک در دبیرخانه به صورت دقیق بررسی کارشناسی می‌شود.</li>
                <li><strong>طرح در کمیسیون:</strong> درخواست در جلسه کمیسیون مطرح شده و در مورد ضرورت تغییر کاربری تصمیم‌گیری می‌شود.</li>
                <li><strong>موافقت یا مخالفت:</strong> در صورت مخالفت، نتیجه به متقاضی اعلام می‌شود. در صورت موافقت، مراحل بعدی طی می‌شود.</li>
                <li><strong>ارزیابی و قیمت‌گذاری:</strong> در صورت شمول عوارض، اراضی توسط کمیته تقویم، قیمت‌گذاری می‌شود.</li>
                <li><strong>پرداخت عوارض:</strong> متقاضی عوارض قانونی را پرداخت می‌کند.</li>
                <li><strong>صدور مجوز:</strong> پس از پرداخت، مجوز نهایی تغییر کاربری صادر می‌شود.</li>
            </ol>
        </>
    ),
    searchableText: 'فلوچارت رسیدگی به درخواست مراحل رسیدگی به درخواست متقاضیان تغییر کاربری تکمیل فرم بررسی مدارک تشخیص نوعیت ارسال به دبیرخانه بررسی کارشناسی طرح در کمیسیون موافقت یا مخالفت ارزیابی و قیمت‌گذاری پرداخت عوارض صدور مجوز'
  },
  {
    id: 'negative_results',
    title: 'نتایج منفی تغییر کاربری',
    icon: <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>,
    content: (
        <>
            <h2>نتایج منفی تغییر کاربری اراضی کشاورزی</h2>
            <p>تغییر کاربری اراضی کشاورزی، به عنوان یکی از چالش‌های جدی در مسیر توسعه پایدار، پیامدهای منفی گسترده‌ای را به همراه دارد که در ادامه به مهم‌ترین آنها اشاره می‌شود:</p>
            <ul>
                <li><strong>تهدید امنیت غذایی جامعه:</strong> کاهش سطح زیر کشت، تولید مواد غذایی را کاهش داده و کشور را به واردات وابسته می‌کند.</li>
                <li><strong>بیکاری بهره برداران و مهاجرت به شهرها:</strong> کشاورزان با از دست دادن منبع درآمد خود، مجبور به مهاجرت می‌شوند.</li>
                <li><strong>گسترش حاشیه نشینی و بروز آسیب های اجتماعی:</strong> مهاجرت بی‌رویه منجر به گسترش سکونتگاه‌های غیررسمی و افزایش معضلات اجتماعی می‌شود.</li>
                <li><strong>تخریب ثروت ملی:</strong> خاک کشاورزی یک منبع تجدیدناپذیر و ثروت ملی است که تخریب آن، خسارتی جبران‌ناپذیر است.</li>
                <li><strong>کاهش صادرات محصولات کشاورزی:</strong> کاهش تولید، توانایی کشور برای صادرات را از بین می‌برد.</li>
                <li><strong>گسترش بیابان ها و تخریب محیط زیست:</strong> تغییر کاربری، اکوسیستم‌های طبیعی را نابود کرده و به فرسایش خاک دامن می‌زند.</li>
            </ul>
        </>
    ),
    searchableText: 'نتایج منفی تغییر کاربری اراضی کشاورزی تهدید امنیت غذایی جامعه بیکاری بهره برداران و مهاجرت به شهرها گسترش حاشیه نشینی و بروز آسیب های اجتماعی تخریب ثروت ملی کاهش صادرات محصولات کشاورزی گسترش بیابان ها و تخریب محیط زیست'
  },
];

const Header = ({ onSearch }) => {
    const [query, setQuery] = useState('');

    const handleKeyDown = (event) => {
        if (event.key === 'Enter') {
            onSearch(query);
        }
    };

    return (
        <header className="app-header">
            <div className="header-left-section">
                <img src="https://www.laoi.ir/portal/assets/images/logo.png" alt="آرم سازمان امور اراضی کشور" className="logo" />
                <input
                    type="search"
                    placeholder="جستجو..."
                    className="search-input"
                    value={query}
                    onChange={(e) => setQuery(e.target.value)}
                    onKeyDown={handleKeyDown}
                    aria-label="جستجو در مطالب"
                />
            </div>
            <img src="https://www.maj.ir/dorsapax/data/sub_0/file/logo.png" alt="آرم وزارت جهاد کشاورزی" className="logo" />
        </header>
    );
};

const TopicCard = (props) => (
  <a href="#" className="topic-card" onClick={(e) => { e.preventDefault(); props.onClick(props.topic.id); }}>
    {props.topic.icon}
    <h3>{props.topic.title}</h3>
  </a>
);

const HomePage = ({ onTopicClick }) => (
  <div className="home-page">
    <h1 className="main-title">آشنایی با قوانین و مقررات حفظ کاربری اراضی زراعی و باغی</h1>
    <div className="topic-grid">
      {topics.map(topic => (
        <TopicCard key={topic.id} topic={topic} onClick={onTopicClick} />
      ))}
    </div>
  </div>
);

const ContentPage = ({ pageId, onBack }) => {
  const topic = topics.find(t => t.id === pageId);
  if (!topic) return <div>محتوا یافت نشد.</div>;

  return (
    <div className="content-page">
      <button onClick={onBack} className="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
          <path fillRule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
        </svg>
        بازگشت به صفحه اصلی
      </button>
      {topic.content}
    </div>
  );
};

const SearchResultsModal = ({ results, onSelect, onClose }) => {
    if (!results) return null;

    return (
        <div className="modal-overlay" onClick={onClose}>
            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                <button className="modal-close-button" onClick={onClose} aria-label="بستن پنجره نتایج جستجو">&times;</button>
                <h2>نتایج جستجو</h2>
                {results.length > 0 ? (
                    <ul className="results-list">
                        {results.map(topic => (
                            <li key={topic.id} className="result-item" onClick={() => onSelect(topic.id)}>
                                {topic.title}
                            </li>
                        ))}
                    </ul>
                ) : (
                    <p>موردی یافت نشد.</p>
                )}
            </div>
        </div>
    );
};


const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [searchResults, setSearchResults] = useState(null);
  const [isModalOpen, setIsModalOpen] = useState(false);
  
  const handleSearch = (query) => {
    if (!query || query.trim() === '') {
      setSearchResults([]);
      setIsModalOpen(true);
      return;
    }
    const lowerCaseQuery = query.toLowerCase();
    const results = topics.filter(topic => 
        topic.searchableText.toLowerCase().includes(lowerCaseQuery)
    );
    setSearchResults(results);
    setIsModalOpen(true);
  };
  
  const handleSelectResult = (topicId) => {
    setCurrentPage(topicId);
    setIsModalOpen(false);
    setSearchResults(null);
  };
  
  const handleCloseModal = () => {
    setIsModalOpen(false);
    setSearchResults(null);
  };


  return (
    <>
      <Header onSearch={handleSearch} />
      <main className="app-container">
        {currentPage === 'home' ? (
          <HomePage onTopicClick={setCurrentPage} />
        ) : (
          <ContentPage pageId={currentPage} onBack={() => setCurrentPage('home')} />
        )}
      </main>
      {isModalOpen && <SearchResultsModal results={searchResults} onSelect={handleSelectResult} onClose={handleCloseModal} />}
    </>
  );
};

const container = document.getElementById('root');
const root = createRoot(container!);
root.render(<App />);